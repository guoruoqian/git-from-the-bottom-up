# 仓库：目录内容的跟踪

就像前面的章节所讲述的，Git所做的工作其实非常基本：Git维护着工作目录工作过程中的快照。Git的大多数设计都可以使用这个最基本的任务来理解。

Git仓库的设计理念与Unix文件系统的设计非常相似：Unix文件系统从一个根目录\(root\)开始，典型的文件系统包含了一些目录，大多数的目录还有自己的子目录，或者是包含了真正需要保存的数据的“文件”，即叶子节点。这些文件的元信息，例如文件大小，类型，文件权限等信息，存储在他们所在的目录中，也存储在他们对应的i-node中（在Unix中i-node是文件内容的引用）。每一个i-node都有一个独一无二的数字在唯一标识这个文件的内容。当然，可能存在多个文件指向同一个i-node的情况（典型的如硬链接）。可以说，真正“拥有”这些存在磁盘上文件内容的其实是这些i-node。

在Git的实现内部，与Unix文件系统的结构有着惊人的相似性，尽管存在着一两个重要的不同之处。首先，Git使用一种叫blob的东西来存储文件的内容，就像文件是目录树的叶子节点一样，blobs也是tree（在Git中用于表示目录的数据结构）的的叶子节点。就像i-node使用一个数字来唯一标示文件，blob使用一个SHA1的hash值作为这个文件内容的代表，而这个SHA1值是使用其对应文件的内容和文件大小计算出来的。虽然如此，SHA1值并没有实际的意义，对于大多数的使用场景而言，我们只需要把这个数字当做一个唯一标识，就像i-node的编号一样就可以了。不过一个文件的SHA1值有着两个比较重要的作用：1. SHA1码保证了这个文件绝对不会被修改（HASH校验码的功能），2. 但凡内容相同的文件（尽管命名或创建时间可能不同），不管他们出现在什么地方，我们永远可以使用同一个blob来表示，不管是处于不同commit，不同仓库，乃至于整个互联网，我们都可以用一个唯一的SHA1来表示这个文件。

